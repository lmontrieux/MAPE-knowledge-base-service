{
    "$schema": "http://json-schema.org/schema/#",

    "definitions": {
        "service": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "id": { "type": "string" }
            },
            "additionalProperties": false,
            "required": ["name", "id"]
        },

        "container": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "id": { "type": "string" },
                "services": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/service" }
                }
            },
            "additionalProperties": false,
            "required": ["name", "id"]
        },

        "node": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "id": { "type": "string" },
                "type": { "type": "string" },
                "ami": { "type": "string" },
                "publicIP": { "type": "string" },
                "privateIP": { "type": "string" },
                "size": { "type": "string" },
                "security": { "type": "string" },
                "region": { "type": "string" },
                "containers": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/container" }
                }
            },
            "additionalProperties": false,
            "required": ["name", "id", "type", "ami", "publicIP", "privateIP",
                         "size", "security", "region"]
        },

        "cluster": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "id": { "type": "string" },
                "nodes": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/node" }
                }
            },
            "additionalProperties": false,
            "required": ["name", "id"]
        },

        "dependency": {
            "type": "object",
            "properties": {
                "from": { "type": "string"},
                "to": { "type": "string"}
            },
            "additionalProperties": false,
            "required": ["from", "to"]
        }
    },

    "type": "object",
    "properties": {
        "cloud topology": {
            "type": "object",
            "properties": {
                "clusters": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/cluster" }
                },
                "dependencies": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/dependency" }
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
